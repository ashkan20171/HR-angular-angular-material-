<div class="leave-wrapper">

  <!-- Summary Cards -->
  <div class="summary-cards">

    <div class="card">
      <h3>مرخصی کل</h3>
      <p class="num">{{ summary.total }}</p>
    </div>

    <div class="card used">
      <h3>استفاده شده</h3>
      <p class="num">{{ summary.used }}</p>
    </div>

    <div class="card remaining">
      <h3>باقیمانده</h3>
      <p class="num">{{ summary.remaining }}</p>
    </div>

    <div class="card last">
      <h3>آخرین درخواست</h3>
      <p class="last-type">{{ summary.last.type }}</p>
      <span class="status" [class]="summary.last.status">
        {{ summary.last.status }}
      </span>
    </div>

  </div>

  <!-- Important Line -->
  <div class="divider"></div>

  <!-- Action -->
  <div class="header-action">
    <h2>درخواست‌های من</h2>
    <button class="btn-add" (click)="openModal()">➕ درخواست جدید</button>
  </div>

  <!-- Table -->
  <table class="leave-table">
    <thead>
      <tr>
        <th>نوع</th>
        <th>شروع</th>
        <th>پایان</th>
        <th>روز</th>
        <th>توضیحات</th>
        <th>وضعیت</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let l of leaves">
        <td>{{ l.type }}</td>
        <td>{{ l.start }}</td>
        <td>{{ l.end }}</td>
        <td>{{ l.days }}</td>
        <td>{{ l.desc || '-' }}</td>

        <td>
          <span class="status" [class]="l.status">
            {{ l.status }}
          </span>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Modal -->
  <div class="modal" *ngIf="showModal">
    <div class="modal-box">

      <h3>درخواست مرخصی جدید</h3>

      <label>نوع مرخصی</label>
      <select [(ngModel)]="newLeave.type">
        <option value="">انتخاب کنید</option>
        <option>استحقاقی</option>
        <option>استعلاجی</option>
        <option>بدون حقوق</option>
      </select>

      <label>تاریخ شروع</label>
      <input type="date" [(ngModel)]="newLeave.start" (change)="calcDays()">

      <label>تاریخ پایان</label>
      <input type="date" [(ngModel)]="newLeave.end" (change)="calcDays()">

      <label>توضیحات</label>
      <textarea [(ngModel)]="newLeave.desc"></textarea>

      <div class="days-preview">
        روزهای مرخصی: {{ newLeave.days }}
      </div>

      <div class="modal-buttons">
        <button class="btn-cancel" (click)="closeModal()">لغو</button>
        <button class="btn-ok" (click)="submitLeave()">ثبت</button>
      </div>

    </div>
  </div>

</div>
