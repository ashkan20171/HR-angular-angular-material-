<div class="manager-page">

  <h1>مدیریت درخواست‌ها</h1>

  <!-- فیلترها -->
  <div class="filters">

    <select [(ngModel)]="filterType">
      <option value="">نوع درخواست (همه)</option>
      <option value="leave">مرخصی</option>
      <option value="mission">ماموریت</option>
      <option value="overtime">اضافه‌کاری</option>
      <option value="loan">وام</option>
    </select>

    <select [(ngModel)]="filterStatus">
      <option value="">همه وضعیت‌ها</option>
      <option value="pending">در انتظار</option>
      <option value="approved">تأیید شده</option>
      <option value="rejected">رد شده</option>
    </select>

    <input type="text" placeholder="جستجو (نام یا عنوان)..." [(ngModel)]="search">

  </div>

  <!-- جدول -->
  <table class="req-table">
    <thead>
      <tr>
        <th>نوع</th>
        <th>عنوان</th>
        <th>کاربر</th>
        <th>تاریخ ثبت</th>
        <th>وضعیت</th>
        <th>اقدامات</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let r of all">
        <td>{{ r.type }}</td>
        <td>{{ r.title }}</td>
        <td>{{ r.userName }}</td>
        <td>{{ r.createdAt }}</td>

        <td>
          <span class="status" [class]="r.status">
            {{ r.status === 'approved' ? 'تأیید شده' :
               r.status === 'rejected' ? 'رد شده' : 'در انتظار' }}
          </span>
        </td>

        <td class="actions">
          <button class="btn-yes" (click)="approve(r.id)" *ngIf="r.status === 'pending'">✔</button>
          <button class="btn-no" (click)="reject(r.id)" *ngIf="r.status === 'pending'">✖</button>
        </td>
      </tr>
    </tbody>
  </table>

</div>
