<div class="performance">

  <h1>ارزیابی عملکرد دوره {{ record.period }}</h1>

  <h2>مرحله ۱: خودارزیابی</h2>

  <table>
    <thead>
      <tr>
        <th>KPI</th>
        <th>اهمیت</th>
        <th>امتیاز شما (۱–۵)</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let k of record.kpis; let i=index">
        <td>{{ k.title }}</td>
        <td>{{ k.weight }}%</td>
        <td>
          <select [(ngModel)]="record.evaluations[i].selfScore">
            <option value="">انتخاب</option>
            <option *ngFor="let s of [1,2,3,4,5]" [value]="s">{{ s }}</option>
          </select>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn" (click)="submitSelf()">ثبت خودارزیابی</button>

  <hr>

  <h2>مرحله ۲: ارزیابی مدیر</h2>

  <table>
    <thead>
      <tr>
        <th>KPI</th>
        <th>امتیاز مدیر</th>
        <th>نظر مدیر</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let k of record.kpis; let i=index">
        <td>{{ k.title }}</td>
        <td>
          <select [(ngModel)]="record.evaluations[i].managerScore">
            <option value="">انتخاب</option>
            <option *ngFor="let s of [1,2,3,4,5]" [value]="s">{{ s }}</option>
          </select>
        </td>
        <td>
          <textarea rows="2"
            [(ngModel)]="record.evaluations[i].comment"></textarea>
        </td>
      </tr>
    </tbody>
  </table>

  <button class="btn manager" (click)="submitManager()">ثبت نهایی</button>

  <div *ngIf="record.finalScore" class="final-score">
    امتیاز نهایی: {{ record.finalScore }} از ۵
  </div>

</div>
